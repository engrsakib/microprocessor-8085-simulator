@IS	MACRO
;DESTROYS BP
;INIT ALL SEGMENTS+SP ,SAVE THEM AT SCRATCH PAD STORAGE AREA
	XOR AX,AX		;INIT FOR KIT PRESENTLY SKIP
	MOV AX,AX		;ES,SS<-0000,SSNEXT LINE		
	MOV AX,AX		;SS<-0000
	PUSH CS
	POP DS
	MOV AX,0700H		;SP<---0700
	MOV AX,ES
	MOV CS:00FEH,AX		;ES IS STORED HERE
	MOV AX,DS
	@ES AX,STOSEG,00H	;DS->STOSEG
	MOV AX,SS
	@ES AX,STOSEG,02H	;SS->STOSEG+2
	MOV AX,ES
	@ES AX,STOSEG,04H	;ES->STOSEG+4
	MOV AX,SP
	@ES AX,STOSEG,06H	;SP->STOSEG+6	
	ENDM
@RS	MACRO
;RESTORE ALL SEGMENTS+SP EXCEPT ES WHICH MAY NOT BE DESTROYED
;BY THE USER.
	MOV AX,CS:00FEH
	MOV ES,AX		;ES IS FETCHED FROM 00FEH
				;XOR AX,AX
				;MOV AX,AX ES SET TO 0000 ON KIT
	@EF AX,STOSEG,00H
	MOV DS,AX
	@EF AX,STOSEG,02H
	MOV SS,AX
	@EF SP,STOSEG,06H
	ENDM
@SE	MACRO
	;SETS ES ONLY TO KNOWN VALUE
	MOV AX,CS:00FEH
	MOV ES,AX		;ES IS FETCHED FROM 00FEH
				;XOR AX,AX
				;MOV AX,AX ES SET TO 0000 ON KIT
	ENDM
@SED	MACRO
	;SET ES,DS IN ANY INT ISR 
	PUSH AX
	@SE			;SETS ES TO 0000 ON KIT
	@EF AX,STOSEG,00H
	MOV DS,AX
	POP AX
	ENDM
@PCK1	MACRO
	;LOAD SI,CX AT SALOOP
	@M SI,INTA0			;INTXX
	@M CX,INTA0+(0BFH-0A0H+1H)*4H-1H	;INTXX,0FFH,00H
	MOV DI,0A0H*4H			;00H
	ENDM
@PCK2	MACRO
	;LOAD CONSOLE TYPE
	MOV AX,2121H			;0A9A8H
	MOV AX,2121H			;0A7A6H
	ENDM
@PCK3	MACRO
	;LDINTS
	@N LDINTS			;3*NOPS
	ENDM
@PCK4	MACRO
	;PC7 CHECKING
	NOP				;JZ WRSK01
	NOP
	NOP
	ENDM				 
@PCK5	MACRO
	;IN WRTENB
	NOP				;JZ WEBSK01
	NOP
	NOP		
	ENDM
@PCK6	MACRO
	;IN SETRKBS
	INT 21H				;0A9H
	ENDM
@PCK7	MACRO
	;IN SETRKBR
	MOV AL,21H			;0A8H
	ENDM
@PCK8	MACRO
	;IN SETSERIL
	MOV AX,2121H			;0A9A8H
	ENDM
@PCK9	MACRO
	;IN SOUTBIN
	@N OUTASCI			;MOV DL,AL
	NOP				;INT 0A9H
	ENDM
@PCK10	MACRO
	;IN SINHEX
	MOV AH,08H		
	INT 21H				;0A8H
	MOV AH,00H			;NOP,NOP
	ENDM
@PCK11	MACRO
	;IN DISPLAY/7 SEGMENT
	MOV AH,21H		;0A7H
	ENDM
@PCK12	MACRO
	;IN ASCII/HEX KBD
	MOV AL,21H		;0A6H
	ENDM
@PCK13	MACRO
	;IN SIGNON AFTER INIT.
	NOP
	NOP		;JNZ SKPBB ON KIT
	ENDM
@PCK14	MACRO
	;AFTER INI51 ERROR STATUS OF 8251 CHECKING
	AND AL,00H		;AND AL,38H 0N KIT
	ENDM

