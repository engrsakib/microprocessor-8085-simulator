;Program to carry out BCD to Binary conversion.
;THE STORED CONSTANT NUMBER (23) IN THIS CASE IS INTERPRETED BY THE ASSEMBLER
;AS HEX (17). SO THE STORED NUMBER IS 17 (IN THE PROGRAM).
;THE PROGRAM INTERPRETES THIS NUMBER AS DECIMAL.SO THE PROGRAM SEES THIS
;NUMBER AS 17 (BASE 10) WHICH IS EQUIVALENT OF 11 (BASE 16).SO THE FINAL
;ANSWER PRODUCED IS 11.
;E.G. IF THE STORED NUMBER WERE CHANGED TO (SAY) 64. THIS WILL BE STORED AS
;40 (BASE 16) BY THE ASSEMBLER. THE PROGRAM WILL INTERPRET THIS NUMBER AS
;40 (BASE 10) AND WILL CONVERT IT TO 28 (BASE 16)

; THE BCDBIN PROCEDURE IN THIS PROGRAM TAKES THE ARGUMENT ON STACK.

COMSEG SEGMENT
	ASSUME CS:COMSEG, DS:COMSEG, SS:COMSEG, ES:COMSEG
	
	ORG 0100H			;ORG FOR COM STRUCTURED PROGRAMS (ALL SEGMENTS IN ONE SEGMENT
						;AND PROGRAM MAXIMUM SIZE 64KbYTES.)
	
START:
	JMP SKIP_DATA		;SKIP OVER DATA DECLARATIONS

;--------------DEFINE DATA SIZES AND NAMES--------

BCD DB 23
BIN DB ?

;--------------END OF DATA DEFINITION-------------

SKIP_DATA:
	MOV AX,10FFH
	MOV SP,AX
	
	MOV AX,0000H
	MOV SS,AX
	MOV ES,AX
	
	PUSH CS
	POP DS
	
	NOP
	NOP
	NOP
	
	MOV AL,BCD
	PUSH AX
	CALL BCDBIN
	
	POP AX
	MOV BIN,AL
	
	INT 0A5H
	
;-------------END OF MAIN PROGRAM--------

	BCDBIN PROC NEAR
	
	PUSHF
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH BP
	MOV BP,SP
	MOV AX,[BP+12]
	MOV BL,AL
	AND BL,0FH
	AND AL,0F0H
	MOV CL,04
	ROR AL,CL
	MOV BH,0AH
	MUL BH
	ADD AL,BL
	MOV [BP+12],AX
	
	POP BP
	POP CX
	POP BX
	POP AX
	POPF
	RET
	
	BCDBIN ENDP
	
COMSEG ENDS
END START
